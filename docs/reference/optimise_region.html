<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Computes and regionalizes optimal estimate from multiple discharge 
timeseries against observed streamflow — optimise_region • hydrostreamer</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Computes and regionalizes optimal estimate from multiple discharge 
timeseries against observed streamflow — optimise_region" />

<meta property="og:description" content="Algorithm routes runoff using user specified routing algorithm, for
each observation point in sequence starting from the most upstream
point. The optimum weight combination is regionalized to the other
river segments which do not contain observation information." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydrostreamer</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/hydrostreamer_simple_tutorial.html">hydrostreamer tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Computes and regionalizes optimal estimate from multiple discharge 
timeseries against observed streamflow</h1>
    
    <div class="hidden name"><code>optimise_region.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Algorithm routes runoff using user specified routing algorithm, for
each observation point in sequence starting from the most upstream
point. The optimum weight combination is regionalized to the other
river segments which do not contain observation information.</p>
    
    </div>

    <pre class="usage"><span class='fu'>optimise_region</span>(<span class='no'>HSrunoff</span>, <span class='no'>HSobs</span>, <span class='kw'>routing</span> <span class='kw'>=</span> <span class='st'>"simple"</span>, <span class='kw'>train</span> <span class='kw'>=</span> <span class='fl'>0.5</span>,
  <span class='kw'>optim_method</span> <span class='kw'>=</span> <span class='st'>"CLS"</span>, <span class='kw'>bias_correction</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>region_type</span> <span class='kw'>=</span> <span class='st'>"upstream"</span>,
  <span class='kw'>no_station</span> <span class='kw'>=</span> <span class='st'>"em"</span>, <span class='no'>...</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>HSrunoff</th>
      <td><p>An <code>HSrunoff</code> object containing  runoff
estimates.</p></td>
    </tr>
    <tr>
      <th>HSobs</th>
      <td><p>An <code>HSobs</code> object containing the observed timeseries
for all stations.</p></td>
    </tr>
    <tr>
      <th>routing</th>
      <td><p>Routing algorithm to use. See 
<code><a href='accumulate_runoff.html'>accumulate_runoff</a></code> for options.</p></td>
    </tr>
    <tr>
      <th>train</th>
      <td><p>The share of timeseries used for training period.</p></td>
    </tr>
    <tr>
      <th>optim_method</th>
      <td><p>Method used to optimise. Default uses constrained
linear regression. See details.</p></td>
    </tr>
    <tr>
      <th>bias_correction</th>
      <td><p>Whether to apply bias correction. Default FALSE.
If TRUE, constant bias correction is applied to all river segments.
See details.</p></td>
    </tr>
    <tr>
      <th>region_type</th>
      <td><p>How to regionalize combination weights. See details.</p></td>
    </tr>
    <tr>
      <th>no_station</th>
      <td><p>How to handle river segments with no downstream 
stations. See details.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional parameters passed to the <code>routing</code> algorithm.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Whether or not print progress indicators.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns an <code>HSflow</code> object with one discharge layer (the
  optimized streamflow), and two additional columns in 
  <code>HSflow$river</code>:</p><ul>
<li><p>OPTIMIZED_STATION: Name of the station from HSobs which'
      optimized weights were used at the river segment</p></li>
<li><p>OPTIMIZED_riverID: ID of the segment the weighted station
      is located in.</p></li>
</ul>

    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Currently only one regionalization type is implemented: <code>
upstream</code> uses the weights obtained for the nearest downstream
station for the river segment.</p>
<p>Options for <code>no_station</code> is currently only one: <code>"em"</code>, 
which stands for "ensemble mean". For those river segments with no
weights assigned from a station, an ensemble mean (each discharge
prediction is given equal weight) is computed.</p>
<p>If <code>bias_correction</code> is set to <code>TRUE</code>, constant bias 
correction is applied. Bias is divided equally among all river
segments which are being optimised within a region. For example,
if the sub-basin being optimised has 10 river segments, and bias
(mean error) at the station being optimised is 10 m3/s, each
river segment is added with a constant 1 m3/s runoff.</p>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Marko Kallio.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

