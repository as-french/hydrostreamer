<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Creates a river network and river segment drainage basins from a DEM — create_river • hydrostreamer</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Creates a river network and river segment drainage basins from a DEM — create_river" />
<meta property="og:description" content="This function creates a river network and individual river segment
drainage basins from a digital elevation model. Outputs are written
as gpkg files which can be directly used in hydrostreamer." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hydrostreamer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/hydrostreamer_simple_tutorial.html">hydrostreamer tutorial</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mkkallio/hydrostreamer/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates a river network and river segment drainage basins from a DEM</h1>
    <small class="dont-index">Source: <a href='https://github.com/mkkallio/hydrostreamer/blob/master/R/create_river.R'><code>R/create_river.R</code></a></small>
    <div class="hidden name"><code>create_river.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates a river network and individual river segment
drainage basins from a digital elevation model. Outputs are written
as gpkg files which can be directly used in hydrostreamer.</p>
    </div>

    <pre class="usage"><span class='fu'>create_river</span><span class='op'>(</span>
  <span class='va'>dem</span>,
  <span class='va'>minslope</span>,
  threshold <span class='op'>=</span> <span class='fl'>5</span>,
  output_path <span class='op'>=</span> <span class='st'>""</span>,
  do_basins <span class='op'>=</span> <span class='cn'>TRUE</span>,
  rsaga_env <span class='op'>=</span> <span class='cn'>FALSE</span>,
  verbose <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dem</th>
      <td><p>A RasterLayer object in WGS84 coordinate system
representing terrain elevation in raster values.</p></td>
    </tr>
    <tr>
      <th>minslope</th>
      <td><p>Minimum slope angle (degrees) to preserve between DEM cells
when deriving river segments. Note that when using meters
as vertical units and degrees as horizontal units the
minimum slope calculation is not able to do the conversion.
If the river network doesn't form, increase this parameter.
Increasing minslope leads to more carefully carved flowpaths
and decreasing it may result in flat areas due to elevation
changes becoming less than the numerical accuracy of output
layer. For further information, see SAGA-GIS tool
ta_preprocessing module 4.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>Strahler order of small streams from which to start
drawing rivers. Changes the threshold parameter in
SAGA-GIS tool Channel Network and Drainage Basins
(ta_channels module 5). If the river network comes
out as too dense, increase the threshold and if it's
too sparse, lower the threshold.</p></td>
    </tr>
    <tr>
      <th>output_path</th>
      <td><p>Path to which the outputs will be written.
Defaults to empty string; outputs will be
written to temp folder. Value "wd" writes
outputs to current working directory.</p></td>
    </tr>
    <tr>
      <th>do_basins</th>
      <td><p>Whether delineating individual river segment basins
or not. Basin delineation takes some extra time.</p></td>
    </tr>
    <tr>
      <th>rsaga_env</th>
      <td><p>Valid RSAGA environment parameter list according
to specifications in function rsaga.env().
Recommended not to give when automatic detection
of RSAGA environment works. Even in manual case,
best created by calling rsaga.env() with parameters.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Whether outputting intermediate messages or not.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Two-placed list of filenames to created rivers and basins.
        list$rivers gives path to created rivers and list$basins
        to created river segment basins. If list$basins is NA, no
        basins were created.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>This package takes advantage of SAGA-GIS tools through RSAGA to
first derive a river network and drainage directions and further
to delineate individual river segment basins with hydrostreamer tools.</p>
<p>First, a DEM is read in and it is filled to ensure continuous flow
paths throughout the given area into basin outlets instead of random
sinks. SAGA-GIS ta_preprocessing module 4, which takes advantage of a
sink fill algorithm by Wang &amp; Liu (2006), is used in the filling.</p>
<p>After this, SAGA-GIS ta_channels module 5 is used to derive the river
network and drainage directions throughout the area provided. Finally,
drainage basins are delineated for each river segment.</p>
<p>Outputs are gpkg files which can be read and used directly in
hydrostreamer. In return value, absolute file paths to resulting
files are given as a list.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Vili Virkki</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-spatial.github.io/sf/'>sf</a></span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://mkkallio.github.io/hydrostreamer/'>hydrostreamer</a></span><span class='op'>)</span>
  <span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://rspatial.org/raster'>raster</a></span><span class='op'>)</span>

  <span class='co'># Read in a DEM from an existing file</span>
  <span class='va'>dem</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></span><span class='op'>(</span><span class='st'>"DEMraster.tif"</span><span class='op'>)</span>

  <span class='co'># Create river network and drainage basins</span>
  <span class='va'>results</span> <span class='op'>&lt;-</span> <span class='fu'>create_river</span><span class='op'>(</span>dem <span class='op'>=</span> <span class='va'>dem</span>, minslope <span class='op'>=</span> <span class='fl'>1.0</span><span class='op'>)</span>

  <span class='co'># Read from output files</span>
  <span class='va'>rivers_created</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='va'>results</span><span class='op'>$</span><span class='va'>rivers</span><span class='op'>)</span>
  <span class='va'>basins_created</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://r-spatial.github.io/sf/reference/st_read.html'>st_read</a></span><span class='op'>(</span><span class='va'>results</span><span class='op'>$</span><span class='va'>basins</span><span class='op'>)</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Marko Kallio, Vili Virkki.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


